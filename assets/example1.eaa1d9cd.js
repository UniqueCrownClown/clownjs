import{_ as l,d,a as v,z as g,A as f,o as C,g as m,q as x,s as B,i as D}from"./index.92fe192e.js";let u={};u.shallowExtend=function(i,t,s=!1){for(let e in t)t.hasOwnProperty(e)&&(s||i[e]===void 0)&&(i[e]=t[e]);return i};u.getRandomInt=function(i,t=0){return t=t|0,Math.floor(Math.random()*(i-t))+t};u.isSupportCanvas=function(){return!!document.createElement("CANVAS").getContext};u.inherits=function(i,t){let s=i.prototype,e=new Function;e.prototype=t.prototype;let n=i.prototype=new e;for(let h in s)n[h]=s[h];i.prototype.constructor=i,i.superClass=t.prototype};class r{constructor(t,s){this.config=u.shallowExtend(t||{},s),this._calcInitValues()}_calcInitValues(){}setConfig(t){u.shallowExtend(this.config,t,!0)}}class _ extends r{constructor(t){const s={canvasWidth:800,canvasHeight:600,maxDepth:250,minDepth:0,baseDepth:50,baseSize:4.5,baseSpeedX:.8,baseSpeedY:1.6,minAlpha:.5,maxAlpha:1,chipColor:{r:235,g:178,b:180}};super(t,s),this.x=0,this.y=0,this.depth=0,this.r1=0,this.r2=0,this.rp1=0,this.rp2=0,this.color=[235,178,180],this._calcInitValues()}_calcInitValues(){var t=this.config;this.x=u.getRandomInt(t.canvasWidth),this.y=u.getRandomInt(t.canvasHeight),this.depth=u.getRandomInt(t.maxDepth,t.minDepth),this.r1=Math.random()*Math.PI*2,this.r2=Math.random()*Math.PI*2,this.rp1=Math.random()*.1,this.rp2=Math.random()*.1,this.color=[t.chipColor.r+u.getRandomInt(20),t.chipColor.g+u.getRandomInt(20),t.chipColor.b+u.getRandomInt(20)]}move(){var t=this.config;this.r1=this.r1+this.rp1<Math.PI*2?this.r1+this.rp1:this.r1+this.rp1-Math.PI*2,this.r2=this.r2+this.rp2<Math.PI*2?this.r2+this.rp2:this.r2+this.rp2-Math.PI*2,this.x+=t.baseSpeedX*(1+this.depth/t.baseDepth),this.y+=t.baseSpeedY*(1+this.depth/t.baseDepth)+Math.sin(this.r1)*2;var s=u.getRandomInt(t.maxDepth,t.minDepth);t.baseSpeedX>0?this.x>t.canvasWidth&&(this.x=0,this.y=t.canvasHeight-this.y,this.depth=s):this.x<0&&(this.x=t.canvasWidth,this.y=t.canvasHeight-this.y,this.depth=s),t.baseSpeedY>0?this.y>t.canvasHeight&&(this.x=t.canvasWidth-this.x,this.y=0,this.depth=s):this.y<0&&(this.x=t.canvasWidth-this.x,this.y=t.canvasHeight,this.depth=s)}getAlpha(){var t=this.config;return t.minAlpha+(t.maxAlpha-t.minAlpha)*(this.depth/t.baseDepth)}getPetal(){var t=this.config,s=t.baseSize*(1+this.depth/t.baseDepth),e=Math.sin(this.r1)*s,n=Math.sin(this.r2)*s,h=Math.cos(this.r1)*s,a=Math.cos(this.r2)*s,o=.9;return[[this.x,this.y],[this.x+h,this.y+e,this.x+h+n/2,this.y+e+a/2],[this.x+(h+n)*.75*o,this.y+(a+e)*.75*o],[this.x+n+h/2,this.y+a+e/2],[this.x+n,this.y+a,this.x,this.y]]}}class E extends r{constructor(t){if(!u.isSupportCanvas())throw new Error("The browser doesn't support <canvas>.");const s={canvasClassName:"ec-sakura-canvas",canvasWidth:800,canvasHeight:600,framerate:20,maxChips:24,shadowColor:"#DE8397",shadowBlur:2};super(t,s),this.chips=[],this.chipsLen=0}_calcInitValues(){this.config.createLimit=this.config.framespan/2,this.config.framespan=1e3/this.config.framerate,this.canvas,this.context,this.chips=[],this.chipsLen=0}init(){this._createCanvas(),this._createChips()}_createCanvas(){var t=document.createElement("CANVAS");t.className=this.config.canvasClassName,t.width=this.config.canvasWidth,t.height=this.config.canvasHeight,this.canvas=t,this.context=t.getContext("2d")}_createChips(){var t=this.config,s=[],e=0,n=new Date,h,a;for(a=0;a<t.maxChips&&(s.push(new _(t)),++e,h=new Date,!(h.getTime()-n.getTime()>t.createLimit));++a);this.chips=s,this.chipsLen=e}_loop(){var t=this.config,s=new Date,e=this.context,n,h,a,o;for(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.save(),o=0;o<this.chipsLen&&(n=this.chips[o],n.move(),h=n.getAlpha(),a=n.getPetal(),e.fillStyle="rgba("+n.color[0]+","+n.color[1]+","+n.color[2]+","+h+")",e.beginPath(),e.moveTo(a[0][0],a[0][1]),e.quadraticCurveTo(a[1][0],a[1][1],a[1][2],a[1][3]),e.lineTo(a[2][0],a[2][1]),e.lineTo(a[3][0],a[3][1]),e.quadraticCurveTo(a[4][0],a[4][1],a[4][2],a[4][3]),e.closePath(),e.fill(),!(new Date().getTime()-s.getTime()>t.createLimit));++o);e.restore()}getCanvas(){return this.canvas}getCanvasContext(){return this.context}animate(){setInterval(function(t){return function(){t._loop.call(t)}}(this),this.config.framespan)}setConfig(t){var s=t.canvasWidth!==void 0&&t.canvasWidth!==this.config.canvasWidth||t.canvasHeight!==void 0&&t.canvasHeight!==this.config.canvasHeight;super.setConfig(t),s&&(this.canvas.width=this.config.canvasWidth,this.canvas.height=this.config.canvasHeight),this.chips.forEach(function(e){e.setConfig(t)})}}const F=d({setup(){const i=v(null);let t,s=null;const e=()=>{let h=i.value;const a=h.clientWidth||600,o=h.clientHeight||400;s.setConfig({canvasWidth:a,canvasHeight:o})},n=()=>{clearTimeout(t),t=setTimeout(e,500)};return g(()=>{const h=i.value,a=h.clientWidth||600,o=h.clientHeight||400,c={canvasClassName:"ec-sakura-canvas",canvasWidth:a,canvasHeight:o};try{s=new E(c),s.init(),h.appendChild(s.getCanvas()),s.animate()}catch(p){console.log(p.message)}window.addEventListener("resize",n,!1)}),f(()=>{window.removeEventListener("resize",n,!1)}),{sakuraContainer:i}}}),w=i=>(x("data-v-d8c6c51e"),i=i(),B(),i),y={class:"canvas",ref:"sakuraContainer"},A=w(()=>D("pre",{class:"text"},`      \u6843\u82B1\u575E\u91CC\u6843\u82B1\u5EB5\uFF0C\u6843\u82B1\u5EB5\u91CC\u6843\u82B1\u4ED9\u3002 
      \u6843\u82B1\u4ED9\u4EBA\u79CD\u6843\u6811\uFF0C\u53C8\u6458\u6843\u82B1\u5356\u9152\u94B1\u3002
      \u9152\u9192\u53EA\u5728\u82B1\u524D\u5750\uFF0C\u9152\u9189\u8FD8\u6765\u82B1\u4E0B\u7720\u3002 
      \u534A\u9192\u534A\u9189\u65E5\u590D\u65E5\uFF0C\u82B1\u843D\u82B1\u5F00\u5E74\u590D\u5E74\u3002
      \u4F46\u613F\u8001\u6B7B\u82B1\u9152\u95F4\uFF0C\u4E0D\u613F\u97A0\u8EAC\u8F66\u9A6C\u524D\u3002 
      \u8F66\u5C18\u9A6C\u8DB3\u5BCC\u8005\u8DA3\uFF0C\u9152\u76CF\u82B1\u679D\u8D2B\u8005\u7F18\u3002
      \u82E5\u5C06\u5BCC\u8D35\u6BD4\u8D2B\u8D31\uFF0C\u4E00\u5728\u5E73\u5730\u4E00\u5728\u5929\u3002 
      \u82E5\u5C06\u8D2B\u8D31\u6BD4\u8F66\u9A6C\uFF0C\u4ED6\u5F97\u9A71\u9A70\u6211\u5F97\u95F2\u3002
      \u522B\u4EBA\u7B11\u6211\u592A\u75AF\u766B\uFF0C\u6211\u7B11\u4ED6\u4EBA\u770B\u4E0D\u7A7F\u3002 
      \u4E0D\u89C1\u4E94\u9675\u8C6A\u6770\u5893\uFF0C\u65E0\u82B1\u65E0\u9152\u9504\u4F5C\u7530\u3002
    `,-1)),I=[A];function S(i,t,s,e,n,h){return C(),m("div",y,I,512)}var H=l(F,[["render",S],["__scopeId","data-v-d8c6c51e"]]);export{H as default};
